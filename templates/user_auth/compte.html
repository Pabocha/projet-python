<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />

  <title>UpConstruction Bootstrap Template - Contact</title>
  <meta content="" name="description" />
  <meta content="" name="keywords" />

  <!-- Favicons -->

  <link href="/media/img/favicon.png" rel="icon" />
  <link href="/media/img/apple-touch-icon.png" rel="apple-touch-icon" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&family=Roboto:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Work+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
    rel="stylesheet" />

  <!-- Vendor CSS Files -->
  <link href="/media/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="/media/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
  <link href="/media/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" />
  <link href="/media/vendor/aos/aos.css" rel="stylesheet" />
  <link href="/media/vendor/glightbox/css/glightbox.min.css" rel="stylesheet" />
  <link href="/media/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />

  <!-- Template Main CSS File -->
  <link href="{% static 'sass/main.css'%}" rel="stylesheet" />
  <script src="https://unpkg.com/htmx.org@1.9.2"
    integrity="sha384-L6OqL9pRWyyFU3+/bjdSri+iIphTN/bvYyM37tICVyOJkWZLpP2vGn6VUEXgzg6h"
    crossorigin="anonymous"></script>


  <!-- =======================================================
  * Template Name: UpConstruction
  * Updated: Mar 10 2023 with Bootstrap v5.2.3
  * Template URL: https://bootstrapmade.com/upconstruction-bootstrap-construction-website-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>
  <!-- ======= Header ======= -->
  <header id="header" class="header d-flex align-items-center">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-between">
      <a href="/" class="logo d-flex align-items-center">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <!-- <img src="assets/img/logo.png" alt=""> -->
        <h1>CoopérativeCP<span>.</span></h1>
      </a>

      <i class="mobile-nav-toggle mobile-nav-show bi bi-list"></i>
      <i class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"></i>
      {% include 'base/navbar.html'%}

      <!-- .navbar -->
    </div>
  </header>
  <!-- End Header -->

  <main id="main">
    <!-- ======= Breadcrumbs ======= -->
    <div class="breadcrumbs d-flex align-items-center" style="background-image: url('/media/img/breadcrumbs-bg.jpg')">
      <div class="container position-relative d-flex flex-column align-items-center" data-aos="fade">
        <h2>Tableau de bord</h2>
        <ol>
          <li><a href="/">Home</a></li>
          <li>Tableau de bord</li>
        </ol>
      </div>
    </div>
    <!-- End Breadcrumbs -->

    <!-- style="background: rgb(254,185,0); -->
    <!-- End Contact Section -->
    <div class="container my-5">
      <div class="row">

        <div class="col-lg-3">
          <div class="contact" id="contact">
            <div class="info-item d-flex flex-column justify-content-start align-items-center vh-100">
              <i class="bi bi-person-circle"></i>
              <h3>Menu Membres</h3>
              <p>Acceder à votre compte</p>
              <br><br>
              <div class="bg-dark p-3 w-100 d-flex align-items-center">
                <i class="bi bi-person-bounding-box up-icon"></i><a href="{% url 'compte' %}">Compte</a>
              </div>
              <br>
              <div class="bg-dark p-3 w-100 d-flex align-items-center">
                <i class="bi bi-wallet-fill up-icon"></i><a href="">Vos transactions</a>
              </div>
              <br>
              <!-- <div class="bg-dark p-3 w-100 d-flex align-items-center">
                <i class="bi bi-gear up-icon"></i><a href="{% url 'profile' %}">Editer
                  votre compte</a>
              </div> -->
              <div class="bg-dark p-3 w-100 d-flex align-items-center">
                <i class="bi bi-gear-fill up-icon"></i><a href="{% url 'profile' %}">Editer
                  votre compte</a>
              </div>
              <br>
              <div class="bg-dark p-3 w-100 d-flex align-items-center">
                <i class="bi bi-telephone-outbound-fill up-icon"></i><a href="#">Demande Spéciale</a>
              </div>
              <br>
              <div class="bg-dark p-3 w-100 d-flex align-items-center">
                <i class="bi bi-power up-icon"></i><a href="{% url 'logout' %}">Se deconnecter</a>
              </div>
            </div>
          </div>
        </div>



        <div class="col-lg-9" id="contente">
          <div class="contact " id="contact" style="border-left: 4px solid rgb(254,185,0);">
            <div class="info-item py-4">
              <h5 class="px-5"> Bienvenue sur votre tableau de bord</h5>
            </div>
          </div>
          <div class="row d-flex   my-5 pb-2">
            <div class="col-lg-4 col-sm-12 d-flex gap-2 align-items-center"><i
                class="fa-solid fa-user-tie icon-user"></i><span>Matricule: <br>
                <font>
                  {{investisseur.matricule}}</font>
              </span>
            </div>
            <div class="col-lg-4 col-sm-12 d-flex gap-2 align-items-center"><i
                class="fa-solid fa-calendar-days icon-user"></i>
              <span>Date
                d'inscription: <br>
                {% if investisseur.date_inscris is not None %}
                <font>{{investisseur.date_inscris}}</font>
                {% else %}
                <font>Après payement</font>
                {% endif %}
              </span>

            </div>
            <div class="col-lg-4 col-sm-12 d-flex gap-2 align-items-center"><i
                class="fa-sharp fa-solid fa-lock icon-user"></i><span>Dernière connexion: <br>
                <font>{{request.user.last_login}}</font>
              </span></div>
          </div>
          <!-- message d'erreur  -->
          <div class="wrapper mt-4">
            {% for message in messages %}
            <div class="alert {{message.tags}} alert-dismissible fade show" role="alert">
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
              </button>
              {% if message.tags == 'alert-success' %}
              <i class="bi bi-check-circle-fill me-2"></i> {{message|safe}}
              {% else %}
              <i class="bi bi-x-circle-fill me-2"></i> {{message|safe}}
              {% endif %}
            </div>
            {% endfor %}
          </div>
          <!-- fin message d'erreur  -->
          <div class="row g-4">

            <div class="col-md-6 contact" id="contact">
              <table class="table info-item table-hover">
                <thead>
                  <tr>
                    <th colspan="4" style="background:rgb(254,185,0);">Votre Investissement</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="">
                    <td colspan="2">Montant Investi</td>
                    <td>{{investisseur.montant_investi}} FCFA</td>
                  </tr>
                  <tr>
                    <td colspan="2">Revenue Mensuel</td>
                    <td>{{investisseur.revenue_mensuel}} FCFA</td>
                  </tr>
                  <tr>
                    <td colspan="2">Solde</td>
                    <td>{{investisseur.solde}} FCFA</td>
                  </tr>
                </tbody>
              </table>
              <table class="table info-item">
                <tbody>
                  <tr class="">
                    <td colspan="2">Nombre de mois ecoulé</td>
                    <td><a href="#" class="btn btn-sm"
                        style="background: #000; color: rgb(254, 185, 0); font-weight: bold; cursor:default;">{{mois_ecoule}}
                        Mois</a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="col-md-6 contact" id="contact">
              <table class="table info-item table-hover">
                <thead>
                  <tr>
                    <th colspan="4" style="background:#000; color:rgb(254,185,0)">Vos Retraits</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td colspan="2">Retrait en attente</td>
                    <td>{{investisseur.retrait_en_attente}} FCFA</td>
                  </tr>
                  <tr>
                    <td colspan="2">Total des retraits</td>
                    <td>{{investisseur.total_de_retrait}} FCFA</td>
                  </tr>
                  <tr>
                    <td colspan="2">Total de gains</td>
                    <td id="td_total_de_gains">{{investisseur.total_de_gains}} FCFA</td>
                  </tr>
                </tbody>
              </table>
              <table class="table info-item">
                <tbody>
                  <tr class="">
                    <td colspan="2">Montant Investi</td>
                    <!-- Button trigger modal -->
                    <!-- bouton de retrait  -->
                    <td><button class="btn btn-sm d-flex align-items-centergap-2" data-bs-toggle="modal"
                        data-bs-target="#staticBackdrop"
                        style="background: #000; color: rgb(254, 185, 0); font-weight: bold;"> Retrait</button>
                      <!-- Modal -->
                      <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false"
                        tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="staticBackdropLabel">Retrait d'argent</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                            </div>
                            <!-- si l'utilisateur saisi le montant on envoie les informations grâce au formulaire et on vérifie celal dans la view  -->
                            <form method="POST">
                              <div class="modal-body">
                                {% if investisseur.solde > 0 %}
                                <label for="montant">Saisissez le montant</label>
                                <input type="number" id="montant" name="montant" class="form-control">
                                {% else %}
                                <p>Votre solde est vide mais vous vlouez effectuer un retrait hum l'homme</p>
                                {% endif %}
                              </div>
                              <div class="modal-footer">
                                <button type="button" class="btn"
                                  style="color: #000; background: rgb(254, 185, 0); font-weight: bold;"
                                  data-bs-dismiss="modal">Fermer</button>
                                {% csrf_token %}
                                {% if investisseur.solde > 0 %}
                                <button type="submit" class="btn"
                                  style="background: #000; color: rgb(254, 185, 0); font-weight: bold;">Retirer</button>
                                {% endif %}
                            </form>
                          </div>
                        </div>
                      </div>
            </div>
            <!-- end Modal -->
            </td>
            </tr>
            </tbody>
            </table>
          </div>


        </div>
      </div>
    </div>
    </div>

    </div>
  </main>


  <!-- End #main -->

  {% include 'base/footer.html'%}
  <!-- <script type="text/javascript">
    $(document).ready(function () {
      setInterval(function () {
        $.ajax({
          type: "GET",
          url: "", 
          success: function (response) {
            console.log(response);
            $('#td_montant_investi').empty();
            var montant_investi = response.investisseur.montant_investi + " FCFA";
            $('#td_montant_investi').append(montant_investi);
            $('#td_total_de_gains').empty();
            var total_de_gains = response.investisseur.total_de_gains + " FCFA";
            $('#td_total_de_gains').append(total_de_gains);
          },
          error: function (response) {
            alert("erreur vous avez un bug");
          }
        });
      }, 1000);
    });
  </script> -->


  <a href="#" class="scroll-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="/media/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/media/vendor/aos/aos.js"></script>
  <script src="/media/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="/media/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="/media/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="/media/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="/media/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="{% static 'js/main.js'%}"></script>
</body>

</html>

<style>
  .icon-user {
    font-size: 2rem;
    color: rgb(254, 185, 0);
    border: 1px dashed rgb(254, 185, 0);
    padding: 1rem;
    border-radius: 50%;
  }


  td {
    padding: 1.5rem !important;
  }

  th {
    padding: 2rem !important;
  }

  tr td:nth-child(2) {
    font-weight: bold;
  }

  .up-icon {
    border: none !important;
    width: 30px;
    height: 20px !important;
  }

</style>
